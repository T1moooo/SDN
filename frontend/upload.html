<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸Šä¼ ç­–ç•¥ - SDN QoS ç­–ç•¥ç®¡ç†ç³»ç»Ÿ</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <div class="container">
        <!-- å¯¼èˆªæ  -->
        <nav class="navbar">
            <div class="nav-brand">
                <h1>ğŸŒ SDN QoS ç­–ç•¥ç®¡ç†ç³»ç»Ÿ</h1>
            </div>
            <div class="nav-links">
                <a href="/">ç­–ç•¥åˆ—è¡¨</a>
                <a href="/upload" class="active">ä¸Šä¼ ç­–ç•¥</a>
                <a href="/logs">æ“ä½œæ—¥å¿—</a>
            </div>
        </nav>

        <!-- ä¸»å†…å®¹åŒº -->
        <main class="main-content">
            <div class="card">
                <h2>ğŸ“¤ ä¸Šä¼  QoS ç­–ç•¥</h2>
                
                <form id="upload-form" class="upload-form">
                    <div class="form-group">
                        <label for="policy-file">é€‰æ‹©ç­–ç•¥æ–‡ä»¶ (YAML)</label>
                        <input type="file" id="policy-file" name="file" accept=".yaml,.yml" required>
                        <small>æ”¯æŒæ ¼å¼: .yaml, .yml</small>
                    </div>

                    <div class="form-group">
                        <div id="file-info" class="file-info" style="display: none;">
                            <h3>ğŸ“„ æ–‡ä»¶ä¿¡æ¯</h3>
                            <p><strong>æ–‡ä»¶å:</strong> <span id="filename"></span></p>
                            <p><strong>å¤§å°:</strong> <span id="filesize"></span></p>
                        </div>
                    </div>

                    <div class="form-group">
                        <div id="preview-section" class="preview-section" style="display: none;">
                            <h3>ğŸ“‹ æ–‡ä»¶é¢„è§ˆ</h3>
                            <pre id="file-preview" class="code-block"></pre>
                        </div>
                    </div>

                    <div id="upload-error" class="error-message" style="display: none;"></div>
                    <div id="upload-success" class="success-message" style="display: none;"></div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary" id="upload-btn">
                            â¬†ï¸ ä¸Šä¼ ç­–ç•¥
                        </button>
                        <button type="button" class="btn btn-secondary" onclick="resetForm()">
                            ğŸ”„ é‡ç½®
                        </button>
                        <button type="button" class="btn btn-secondary" onclick="window.location.href='/'">
                            â¬…ï¸ è¿”å›åˆ—è¡¨
                        </button>
                    </div>

                    <div id="upload-progress" class="progress-bar" style="display: none;">
                        <div class="progress-fill"></div>
                        <span class="progress-text">ä¸Šä¼ ä¸­...</span>
                    </div>
                </form>
            </div>

            <!-- å¸®åŠ©ä¿¡æ¯ -->
            <div class="card">
                <h3>ğŸ“– ç­–ç•¥æ–‡ä»¶æ ¼å¼è¯´æ˜</h3>
                <div class="help-content">
                    <p>ç­–ç•¥æ–‡ä»¶ä½¿ç”¨ YAML æ ¼å¼ï¼Œå¿…é¡»åŒ…å«ä»¥ä¸‹å­—æ®µï¼š</p>
                    <ul>
                        <li><code>id</code>: ç­–ç•¥å”¯ä¸€æ ‡è¯†ç¬¦</li>
                        <li><code>name</code>: ç­–ç•¥åç§°</li>
                        <li><code>description</code>: ç­–ç•¥æè¿°</li>
                        <li><code>access_lists</code>: ACL å®šä¹‰ï¼ˆå¯é€‰ï¼‰</li>
                        <li><code>class_maps</code>: æµåˆ†ç±»å®šä¹‰ï¼ˆå¯é€‰ï¼‰</li>
                        <li><code>policy_maps</code>: ç­–ç•¥æ˜ å°„å®šä¹‰</li>
                        <li><code>service_policies</code>: æ¥å£åº”ç”¨é…ç½®</li>
                    </ul>
                    
                    <h4>ç¤ºä¾‹:</h4>
                    <pre class="code-block">---
id: course-priority-v1
name: "é€‰è¯¾ç³»ç»Ÿé«˜ä¼˜å…ˆçº§ç­–ç•¥"
description: "ç¡®ä¿é€‰è¯¾ç³»ç»Ÿæµé‡è·å¾—æœ€é«˜ä¼˜å…ˆçº§"

access_lists:
  - name: ACL_COURSE_SELECTION
    type: ipv4
    rules:
      - sequence: 10
        action: permit
        protocol: tcp
        source: 10.100.0.0/16
        destination: any
        dest_port: [80, 443]

class_maps:
  - name: CLASS_CRITICAL_APPS
    match_type: match-any
    conditions:
      - type: access-group
        name: ACL_COURSE_SELECTION

policy_maps:
  - name: PM_CAMPUS_QOS
    classes:
      - class_name: CLASS_CRITICAL_APPS
        actions:
          - type: set
            parameter: dscp
            value: ef

service_policies:
  - interface: Ethernet1/1
    direction: input
    policy_map: PM_CAMPUS_QOS</pre>
                </div>
            </div>
        </main>
    </div>

    <script src="/static/js/upload.js"></script>
</body>
</html>
